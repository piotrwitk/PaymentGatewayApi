#Assumptions
- Communicating with a bank is assumed to be synchronous. It could be possible to provide a callback mechanism for the bank to send update if it is not an immediate one.


#Git repo:
Available here: https://dev.azure.com/creativecloudlab/_git/PaymentGatewayApi

#Authentication
Currently not implemented.
Two options for the future:
1. OAuth with Bearer token for each request from a merchant (preferred)
2. Access keys generated by the system that could be used by the merchants

#API client
[TODO]

#CI / CD
From the very beginning of the project there are two CI pipelines running.
One for Branch / PRs
One for Master branch + auto deployment to the azure datacentre
Master branch is guarded, so any change has to go via branch + PR
The delivery pipeline does not perform at the moment any Gree/Blue testing when deploying

Build pipelines + history available to view here: https://dev.azure.com/creativecloudlab/PaymentGatewayApi/_build

#Performance testing
Not considered at the moment, for the future:

#Encryption
Currently not implemented. The card number is being obfuscated and only 4 last digits are stored.
For storing sensitive information, we could encrypt some / all fields in the DB / Storage.
This could be also guarded by rotating keys which are used to encrypt/decrypt data.
In case a new key is intorduced - data would be de be decrypted with an old one and entrypted with a new one.

The web API is set to use HTTPS, so no opentext data should be placed on the wire

#Data Storage
There are two "tables":
One "Requests" stores original request (with encoded card number, and only trimmed number in open text).
The second one, "responses" stores data that can be searched by the merchant including the response from a bank.

"Request" could be used to track request that have no corresponding responses and should be trated as a ledger.
Currently it does not support storing multiple request with the same "keys" (merchantId and ReferenceNumber)

For this iteration - I only use in-memory, volatile repository, which is mostly used for integration tests.
This should be replaced with a proper storage. Ideally one, ledger type for registering all requests from the merchants,
The other one to retrieve details of payments.

#Logging & Metrics
Not added for initial iteration. Since this is deployed to azure, I could include ApplicationInsights, which would cover my needs here.
Alternatively: we would need to put a few key metrics:
- 

#API versioning
Currently version is provided as part of the URL (e.g. **/api/V1/[controller]). This was used for simplicity.

#Testing

#Simulating bank
An injectable wrapper is being used, so it could be easily replaced
See: https://dev.azure.com/creativecloudlab/PaymentGatewayApi/_git/PaymentGatewayApi?path=%2FPaymentGateway%2FPaymentGateway%2FPaymentProcessors









